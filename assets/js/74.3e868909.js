(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{429:function(t,a,s){"use strict";s.r(a);var e=s(15),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"webpack4-0-新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack4-0-新特性"}},[t._v("#")]),t._v(" webpack4.0 新特性")]),t._v(" "),a("p",[t._v("webpack4.0 以后 webpack 命令需要额外下载 webpack-cli")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install webpack,webpack-cli -g\n")])])]),a("ul",[a("li",[t._v("webpack 默认的打包入口文件 entry 是"),a("code",[t._v("./src/index.js")]),t._v(",如果既没有 index.js 也没有指定入口会报错找不到入口")]),t._v(" "),a("li",[t._v("需要在"),a("code",[t._v("webpack.config.js")]),t._v("中配置")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("mode")]),t._v("为 4.0 新增的选项也是必须项，可选项为"),a("code",[t._v("development")]),t._v("和"),a("code",[t._v("production")])]),t._v(" "),a("li",[t._v("开发模式"),a("code",[t._v("development")]),t._v("下代码没有被压缩，生产环境"),a("code",[t._v("production")]),t._v("下代码会被压缩\n运行"),a("code",[t._v("webpack")]),t._v("命令后打包生成的文件是"),a("code",[t._v("dist")]),t._v("目录下的"),a("code",[t._v("main.js")])]),t._v(" "),a("li",[a("code",[t._v("webpack4.0")]),t._v(" 提供了约定大于配置的概念；目的是尽量减少配置内容")])]),t._v(" "),a("h2",{attrs:{id:"配置实时打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置实时打包"}},[t._v("#")]),t._v(" 配置实时打包")]),t._v(" "),a("h3",{attrs:{id:"配置每次修改代码后自动打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置每次修改代码后自动打包"}},[t._v("#")]),t._v(" 配置每次修改代码后自动打包")]),t._v(" "),a("p",[t._v("依赖"),a("code",[t._v("webpack-dev-server")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install webpack-dev-server -D\n")])])]),a("p",[t._v("安装成功后，我们就可以直接使用 "),a("code",[t._v("webpack-dev-server")]),t._v("来打包了，这个打包已经是实时监听代码变化了，如果我们修改了代码，"),a("code",[t._v("webpack-dev-server")]),t._v("会自动重新为我们打包，并且自动刷新浏览器。")]),t._v(" "),a("ul",[a("li",[t._v("如果要退出实时打包编译按"),a("code",[t._v("Ctrl+c")])]),t._v(" "),a("li",[t._v("这时我们的项目托管到了"),a("code",[t._v("localhost:8080/")])]),t._v(" "),a("li",[t._v("输出的文件路径在根目录下，就是"),a("code",[t._v("/mian.js")]),t._v(",这里需要注意这个"),a("code",[t._v("main.js")]),t._v("不在 dist 中了，在内存中，没有放到物理磁盘上，方便读取。")])]),t._v(" "),a("h3",{attrs:{id:"配置编译成功后自动打开浏览器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置编译成功后自动打开浏览器"}},[t._v("#")]),t._v(" 配置编译成功后自动打开浏览器")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dev"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("open\n")])])]),a("p",[a("code",[t._v("webpack-dev-server")]),t._v("可以添加很多参数，")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--port")]),t._v("指定端口号，如"),a("code",[t._v("webpack-dev-server --open --port 3000")])]),t._v(" "),a("li",[a("code",[t._v("--progress")]),t._v("显示进度")]),t._v(" "),a("li",[a("code",[t._v("--compress")]),t._v("压缩")]),t._v(" "),a("li",[a("code",[t._v("--hot")]),t._v("热替换")]),t._v(" "),a("li",[a("code",[t._v("--host")]),t._v("指定域名")]),t._v(" "),a("li",[a("code",[t._v("--color")]),t._v("console 色彩")]),t._v(" "),a("li",[a("code",[t._v("--open firefox")]),t._v(" 指定打开火狐浏览器，不同的浏览器在对应的系统可能名称不一致，IE 浏览器"),a("code",[t._v("iexplore")])])]),t._v(" "),a("p",[t._v("这些参数都添加在命令后面就会很长，每次敲这么长一段命令会很痛苦。这里我们去"),a("code",[t._v("package.json")]),t._v("中在"),a("code",[t._v("script")]),t._v("中加一行")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack-dev-server --host xingzai --port 3000"')]),t._v("\n")])])]),a("p",[t._v("这样我们只需要每次运行"),a("code",[t._v("npm run dev")]),t._v("就可以执行这一长串代码了。")]),t._v(" "),a("h3",{attrs:{id:"html-webpack-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-plugin"}},[t._v("#")]),t._v(" html-webpack-plugin")]),t._v(" "),a("p",[t._v("将 html 页面编译结果存放到内存中，省去频繁的读取磁盘上的文件。速度也更快。")]),t._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm i html-webpack-plugin -D\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建插件实例对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" htmlPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//向外暴露一个打包配置对象")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("htmlPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这个组件会自动把打包编译好的 main.js 引入到生成的 html 中")])])}),[],!1,null,null,null);a.default=r.exports}}]);